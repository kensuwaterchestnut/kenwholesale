<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <!-- æ‰‹æ©Ÿè¦–çª—å›ºå®šä¸å¯ç¸®æ”¾ï¼ˆé¿å…é›™é»/é›™æŒ‡æ”¾å¤§ï¼‰ -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>å•ƒé…¥è±è§’é…¥æ‰¹ç™¼å®˜ç¶²</title>
  <meta name="description" content="å•ƒé…¥è±è§’é…¥æ‰¹ç™¼å®˜ç¶²ï¼šæ•´ä»¶èˆ‡å–®å“é …ã€‚ä¸‹å–®å…ˆå¡«è³‡æ–™ã€å…ˆåŒ¯æ¬¾ï¼Œæ ¸å¸³å¾Œå‡ºè²¨ã€‚" />
  <style>
    :root{
      --bg:#faf7f2; --surface:#ffffff; --ink:#111827; --muted:#6b7280;
      --brand:#f59e0b; --brand-dark:#d97706; --ok:#16a34a; --bad:#ef4444;
      --border:#e5e7eb; --shadow:0 12px 28px rgba(0,0,0,.06);
      --hero:url('https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E5%B0%81%E9%9D%A2%E5%A4%A7%E5%9C%96.jpg?raw=1');
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans TC",Arial,sans-serif;touch-action:manipulation}
    a{color:inherit;text-decoration:underline}
    .wrap{max-width:1100px;margin:0 auto;padding:0 12px}

    /* é ‚éƒ¨ã€Œçª—ç°¾å¼ã€åˆ— */
    header{
      position:sticky;top:0;z-index:60;
      background:linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.86)),
                 repeating-linear-gradient(90deg, rgba(0,0,0,.04) 0 14px, rgba(0,0,0,0) 14px 28px);
      backdrop-filter:saturate(1.2) blur(10px); border-bottom:1px solid var(--border)
    }
    .topbar{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:8px 0}
    .brand{display:flex;align-items:center;gap:8px}
    .brand img{width:36px;height:36px;object-fit:contain;border-radius:10px;border:1px solid var(--border);background:#fff}
    .brand h1{font-size:15px;margin:0;font-weight:900;letter-spacing:.2px}
    nav{display:flex;gap:6px;font-size:13px;overflow-x:auto;white-space:nowrap}
    nav a{padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:#fff;text-decoration:none}
    nav a:hover{box-shadow:0 2px 10px rgba(0,0,0,.08)}

    /* Hero */
    .hero{position:relative;margin:0 0 12px;background:linear-gradient(180deg,#fff,rgba(255,255,255,0)),var(--hero);background-size:cover;background-position:center;min-height:42svh;border-bottom:1px solid var(--border)}
    .hero::after{content:"";position:absolute;inset:0;background:linear-gradient(0deg,rgba(0,0,0,.35),rgba(0,0,0,0) 55%)}
    .hero .hero-inner{position:relative;z-index:1;display:grid;align-items:end;min-height:42svh}
    .hero .copy{padding:22px 0 26px;color:#fff;position:relative}
    .brand-inline{position:absolute;left:0;top:-40px}
    .brand-inline img{width:min(120px,28vw);height:auto;border-radius:10px;border:1px solid rgba(255,255,255,.6);box-shadow:0 8px 24px rgba(0,0,0,.25);background:#fff}
    .hero .kicker{display:inline-block;background:rgba(0,0,0,.35);padding:4px 8px;border:1px solid rgba(255,255,255,.25);border-radius:999px;font-size:11px;margin-bottom:8px}
    .hero h2{font-size:clamp(24px,4.2vw,42px);line-height:1.15;margin:0 0 6px;font-weight:900;text-shadow:0 2px 12px rgba(0,0,0,.22)}
    .hero p{margin:0;font-size:clamp(13px,2.3vw,15px);opacity:.95}
    .cta{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
    .btn{appearance:none;border:none;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
    .btn.brand{background:var(--brand);color:#111;border:1px solid var(--brand-dark)}
    .btn.ghost{background:rgba(255,255,255,.12);color:#fff;border:1px solid rgba(255,255,255,.35)}

    /* å€å¡Šå¡ç‰‡ */
    .section-card{background:#fff;border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:14px;margin:18px 0}
    .section-card h3{margin:0 0 8px}

    /* ç¯©é¸ chips */
    .chips{display:flex;flex-wrap:wrap;gap:8px;padding:12px 0 6px}
    .chip{padding:8px 10px;border:1px solid var(--border);border-radius:999px;background:#fff;font-size:13px;cursor:pointer}
    .chip.is-on{border-color:var(--brand);box-shadow:0 2px 10px rgba(245,158,11,.25)}

    /* å•†å“æ ¼ç·š */
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    @media (max-width:360px){.grid{grid-template-columns:1fr}}
    @media (min-width:860px){.grid{grid-template-columns:repeat(3,minmax(0,1fr));gap:14px}}
    .card{position:relative;background:var(--surface);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column}

    /* âœ… å•†å“å¡åœ–ç‰‡ï¼šæ‰‹æ©Ÿç©©å®šé¡¯ç¤ºã€ç½®ä¸­è£åˆ‡ï¼ˆç›¸å®¹èˆŠ Safariï¼‰ */
    .card .media{position:relative;overflow:hidden;background:#f3f4f6}
    .card .media::before{content:"";display:block;padding-top:100%} /* æ‰‹æ©Ÿ 1:1 */
    @media (min-width:860px){ .card .media::before{padding-top:75%} } /* æ¡Œæ©Ÿ 4:3 */
    .card .media img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;object-position:center}

    .soldout{position:absolute;inset:auto 8px 8px auto;background:rgba(17,24,39,.85);color:#fff;padding:4px 8px;border-radius:10px;font-size:11px;z-index:2}
    .badge{position:absolute;left:8px;top:8px;background:#fff;border:1px solid var(--border);font-size:11px;border-radius:999px;padding:3px 7px}
    .badge.right{left:auto;right:8px}
    .body{padding:10px}
    .body h3{margin:6px 0 6px;font-size:15px}
    .meta{color:var(--muted);font-size:12px;margin:2px 0}
    .shipline{font-weight:700;color:#b45309}
    .price{margin-top:6px;font-weight:800;color:#b45309}
    .btn.add{margin:8px 0 2px;background:#111;color:#fff;border-radius:12px;padding:9px 12px;border:1px solid #111;width:100%} /* æ»¿æ¿ */

    .btn.add[disabled]{background:#cfcfcf;border-color:#cfcfcf;cursor:not-allowed}
    .note{font-size:11px;color:var(--muted)}

    /* æ•¸é‡æ§åˆ¶ */
    .qtyline{display:flex;align-items:center;gap:6px;margin-top:6px}
    .qtybtn{width:32px;height:32px;border:1px solid var(--border);background:#fff;border-radius:10px;cursor:pointer}
    .qtyinput{width:64px;padding:8px 10px;border:1px solid var(--border);border-radius:10px;font:inherit;text-align:center}

    /* æµ®å‹•è³¼ç‰©è»Š */
    .cart-fab{position:fixed;right:14px;bottom:14px;z-index:80;display:grid;place-items:center;width:60px;height:60px;border-radius:50%;background:#ffedd5;border:2px solid var(--brand-dark);box-shadow:0 10px 24px rgba(0,0,0,.18);cursor:pointer}
    .cart-fab svg{width:34px;height:34px}
    .cart-count{position:absolute;right:-6px;top:-6px;background:#111;color:#fff;border-radius:999px;min-width:22px;height:22px;display:grid;place-items:center;font-size:12px;border:2px solid #fff}

    /* è³¼ç‰©è»ŠæŠ½å±œ */
    .drawer{position:fixed;inset:0;z-index:90;display:none}
    .drawer.on{display:block}
    .drawer .backdrop{position:absolute;inset:0;background:rgba(0,0,0,.36)}
    .panel{position:absolute;right:0;top:0;bottom:0;width:min(520px,100%);background:#fff;box-shadow:-12px 0 28px rgba(0,0,0,.25);display:flex;flex-direction:column}
    .panel header{padding:12px;border-bottom:1px solid var(--border);background:#fff;display:flex;align-items:center;justify-content:space-between}
    .panel header h4{margin:0;font-size:17px}
    .list{flex:1;overflow:auto;padding:10px}
    .item{display:grid;grid-template-columns:56px 1fr auto;gap:10px;align-items:center;border:1px solid var(--border);border-radius:12px;padding:8px;margin-bottom:8px}
    .item-sub{font-size:12px;color:var(--muted)}
    .qty{display:flex;align-items:center;gap:6px}
    .qty button{width:28px;height:28px;border:1px solid var(--border);background:#fff;border-radius:8px;cursor:pointer}
    .summary{border-top:1px dashed var(--border);padding:10px}
    .row{display:flex;justify-content:space-between;font-size:14px;margin:6px 0}
    .row em{color:var(--muted);font-style:normal}
    .row .ok{color:var(--ok)} .row .warn{color:#b45309}
    .checkout{padding:10px;border-top:1px solid var(--border)}
    .btn.full{width:100%;background:var(--brand);border:1px solid var(--brand-dark);color:#111;font-weight:900}

    /* é ˆçŸ¥ï¼ˆå±•é–‹é–±è®€æ²åº•æ‰å¯å‹¾é¸ï¼‰ */
    .notice{border-top:1px solid var(--border);padding:10px}
    .notice button.toggler{border:1px solid var(--border);background:#fff;border-radius:10px;padding:8px 10px;cursor:pointer}
    .notice .box{margin-top:8px;border:1px solid var(--border);border-radius:10px;padding:10px;max-height:160px;overflow:auto;background:#fffef8}
    .notice .agree{display:flex;align-items:center;gap:8px;margin-top:8px}

    /* ç®¡ç†é½’è¼ªç¸®å°ï¼ˆåªå‰© RAW è½‰æ›ï¼‰ */
    .admin-gear{position:fixed;left:10px;bottom:10px;z-index:85;width:36px;height:36px;border-radius:50%;display:grid;place-items:center;background:#fff;border:1px solid var(--border);box-shadow:0 8px 20px rgba(0,0,0,.12);cursor:pointer}
    .admin-gear svg{width:18px;height:18px}
    .admin-pane{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);z-index:95;background:#fff;border:1px solid var(--border);border-radius:14px;box-shadow:0 20px 40px rgba(0,0,0,.25);padding:0;display:none;width:min(820px,96vw);max-height:92svh;overflow:auto}
    .admin-pane.on{display:block}
    .admin-head{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--border);padding:10px 12px;position:sticky;top:0;background:#fff}
    .admin-head h5{margin:0;font-size:15px}
    .admin-body{padding:12px}
    .admin-actions{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
    .admin-login{padding:14px}
    .admin-login .input{max-width:220px}

    /* âœ… çµå¸³å½ˆçª—èˆ‡è¡¨å–®ï¼šé˜²è·‘ç‰ˆ */
    .sheet{position:fixed;inset:0;z-index:95;display:none}
    .sheet.on{display:block}
    .sheet .backdrop{position:absolute;inset:0;background:rgba(0,0,0,.36)}
    .sheet .card{
      position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
      width:min(720px,96%);max-height:90svh;overflow:auto;
      padding:14px;border-radius:16px;background:#fff;border:1px solid var(--border);box-shadow:var(--shadow)
    }
    .form{display:grid;grid-template-columns:1fr;gap:8px}
    .label{font-size:12px;color:var(--muted)}
    .input,select,textarea{width:100%;padding:10px;border:1px solid var(--border);border-radius:10px;font:inherit;font-size:16px;background:#fff}
    .bank{margin:4px 0 0;font-size:13px;border:1px dashed var(--border);border-radius:12px;padding:10px;background:#fffced}
    .fine{font-size:12px;color:var(--muted)}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    @media (max-width:560px){.two{grid-template-columns:1fr}}

    footer{margin:20px 0 90px;padding-top:12px;border-top:1px solid var(--border);font-size:12px;color:#6b7280;text-align:center}
  </style>
</head>
<body>
  <header>
    <div class="wrap topbar">
      <div class="brand">
        <img id="logoImg" src="https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E5%95%83%E9%85%A5%20Ken-01.png?raw=1" alt="KenSu Logo" />
        <h1 id="siteTitle">å•ƒé…¥è±è§’é…¥æ‰¹ç™¼å®˜ç¶²</h1>
      </div>
      <nav>
        <a href="#about">é—œæ–¼æˆ‘å€‘</a>
        <a href="#store">é¦¬ä¸Šé¸è³¼</a>
        <a href="#news">ç‰©æµé ˆçŸ¥</a>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="wrap hero-inner">
      <div class="copy">
        <!-- ç¸®å°å•†æ¨™æ”¾åœ¨ KEN SU ä¸Šæ–¹ -->
        <div class="brand-inline"><img src="https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E5%95%83%E9%85%A5%20Ken-01.png?raw=1" alt="KenSu Brand" /></div>
        <span class="kicker" id="heroKicker">KEN SU Wholesale</span>
        <h2 id="heroTitle">å¤œå¸‚èµ·å®¶ï¼Œèµ°é€²å…¨å°çš„é»ƒé‡‘é…¥è„†</h2>
        <p id="heroSub">æ•´ä»¶èˆ‡å–®å“é …æ‰¹ç™¼ï½œå¸¸æº«ãƒ»å†·è—ãƒ»å†·å‡ â€” å…ˆåŒ¯æ¬¾ï¼Œæ ¸å¸³å¾Œå‡ºè²¨</p>
        <div class="cta">
          <button class="btn brand" onclick="scrollToStore()">ğŸ›’ é¦¬ä¸Šé¸è³¼</button>
          <button class="btn ghost" onclick="document.getElementById('about').scrollIntoView({behavior:'smooth'})">å“ç‰Œæ•…äº‹</button>
        </div>
      </div>
    </div>
  </section>

  <!-- é—œæ–¼æˆ‘å€‘ï¼šå¡ç‰‡èƒŒæ™¯ -->
  <section class="wrap" id="about">
    <div class="section-card">
      <h3>é—œæ–¼æˆ‘å€‘</h3>
      <p>å•ƒé…¥å¾å¤œå¸‚å°æ”¤ç™¼è·¡ï¼Œä¸»æ‰“è±è§’é…¥ã€ç‚¸é®®å¥¶ã€é£²å“åŸæ–™èˆ‡è¨­å‚™ã€‚ç‚ºäº†è®“éåŠ ç›Ÿå¤¥ä¼´ä¹Ÿèƒ½ç©©å®šå–å¾—åŸç‰©æ–™ï¼Œæˆ‘å€‘é–‹æ”¾<strong>æ•´ä»¶èˆ‡å–®å“é …</strong>æ‰¹ç™¼ã€‚å®Œæˆä¸‹å–®å¾Œï¼Œè«‹ä¾ç•«é¢åŒ¯æ¬¾è³‡è¨Šå®ŒæˆåŒ¯æ¬¾ï¼›æˆ‘å€‘æ ¸å¸³å¾Œå®‰æ’å‡ºè²¨ã€‚</p>
    </div>
  </section>

  <!-- ç”¢å“ -->
  <section class="wrap" id="store">
    <div class="chips" id="chips"></div>
    <div class="grid" id="grid"></div>
  </section>

  <!-- ç‰©æµé ˆçŸ¥ï¼šå¡ç‰‡èƒŒæ™¯ -->
  <section class="wrap" id="news" style="padding:0 0 8px">
    <div class="section-card">
      <h3>ç‰©æµé ˆçŸ¥</h3>
      <ul>
        <li>ğŸ§Š ä½æº«å•†å“éœ€å…¨ç¨‹å†·è—/å†·å‡é…é€ï¼›ä¸åŒæº«å±¤åŸå‰‡ä¸Šåˆ†é–‹é…é€ã€‚</li>
        <li>ğŸšš <b>å…¨é¤¨æ»¿ $5,000 å…é‹</b>ï¼›æœªé”é–€æª»æ™‚ï¼Œä¾<strong>å„æº«å±¤</strong>åˆ†åˆ¥è¨ˆä¸€æ¬¡æœ€é«˜é‹è²»ã€‚</li>
        <li>ğŸ“¦ å‡ºè²¨æ™‚ç¨‹ï¼šæ ¸å¸³å¾Œç´„ 1â€“3 å€‹å·¥ä½œå¤©ï¼ˆé€±æœ«èˆ‡ç¯€æ…¶é‡å¤§æ™‚é †å»¶ï¼‰ã€‚</li>
      </ul>
    </div>
  </section>

  <!-- æµ®å‹•è³¼ç‰©è»Š -->
  <button class="cart-fab" id="cartFab" title="é–‹å•Ÿè³¼ç‰©è»Š" onclick="openCart()">
    <span class="cart-count" id="cartCount">0</span>
    <svg viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <circle cx="64" cy="64" r="36" fill="#f59e0b" stroke="#d97706" stroke-width="6" />
      <path d="M20 36h16l10 46h42l6-28H54" fill="none" stroke="#111" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/>
      <circle cx="52" cy="96" r="6" fill="#111"/><circle cx="88" cy="96" r="6" fill="#111"/>
      <path d="M64 22c-10 0-18 8-18 18 10-6 20-6 36 0-2-10-10-18-18-18z" fill="#fed7aa" stroke="#d97706" stroke-width="4"/>
    </svg>
  </button>

  <!-- è³¼ç‰©è»ŠæŠ½å±œ -->
  <div class="drawer" id="drawer">
    <div class="backdrop" onclick="closeCart()"></div>
    <div class="panel">
      <header>
        <h4>è³¼ç‰©è»Š</h4>
        <div style="display:flex;gap:8px">
          <button class="btn" onclick="clearCart()">æ¸…ç©º</button>
          <button class="btn" onclick="closeCart()">é—œé–‰</button>
        </div>
      </header>
      <div class="list" id="cartList"></div>
      <div class="summary" id="cartSummary"></div>

      <!-- é ˆçŸ¥ï¼ˆå±•é–‹ â†’ æ²åˆ°åº•è§£é–åŒæ„å‹¾é¸ï¼‰ -->
      <div class="notice">
        <button class="toggler" onclick="toggleNotice()">ğŸ“œ ç‰©æµèˆ‡é€€è²¨èªªæ˜ï¼ˆè«‹å±•é–‹é–±è®€ï¼Œéœ€æ²åˆ°æœ€åº•æ‰å¯å‹¾é¸ï¼‰</button>
        <div id="noticeBox" class="box" style="display:none" onscroll="noticeScrolled()">
          <p><b>å‡ºè²¨æ™‚ç¨‹ï¼š</b>å…¥å¸³å¾Œ 1â€“3 å€‹å·¥ä½œå¤©å…§å‡ºè²¨ï¼ˆé€±æœ«èˆ‡ç¯€æ…¶é‡å¤§æ™‚é †å»¶ï¼‰ã€‚</p>
          <p><b>é…é€æ–¹å¼ï¼š</b>å®…é…ä½¿ç”¨æ–°ç«¹è²¨é‹ï¼ˆå¸¸æº« / å†·è— / å†·å‡ / å¤§å‹è²¨é‹ï¼‰ã€‚æ”¶è²¨è«‹<span style="text-decoration:underline">å…¨ç¨‹é–‹ç®±éŒ„å½±</span>ï¼›è‹¥æœ‰é‹æï¼Œè«‹æ–¼ 24 å°æ™‚å…§æä¾›å½±ç‰‡èˆ‡ç…§ç‰‡ï¼Œæˆ‘å€‘å”åŠ©å‘ç‰©æµç†è³ ã€‚</p>
          <p><b>æ‰¹ç™¼å¸¸è¦‹æƒ…æ³èˆ‡é™åˆ¶ï¼š</b></p>
          <ul>
            <li>ä¸åŒæº«å±¤éœ€æ‹†å–®å‡ºè²¨ï¼›è‹¥æœªé”å…¨é¤¨å…é‹é–€æª»ï¼Œå„æº«å±¤å„è¨ˆä¸€æ¬¡æœ€é«˜é‹è²»ã€‚</li>
            <li>å¤§é‡ä»¶æ•¸æˆ–å¤§å‹è²¨ç‰©ï¼ˆå¦‚æ²¹ç‚¸é‹ï¼‰å¯èƒ½æ”¹èµ°å¤§è»Šæˆ–åˆ†æ‰¹é…é€ï¼Œé…é€æ™‚æ®µæ•ç„¡æ³•ä¿è­‰ã€‚</li>
            <li>åé åœ°å€/å±±å€/å·¥åœ°/æ ¡åœ’/ç®¡åˆ¶å€å¯èƒ½åŠ æ”¶é™„åŠ è²»æˆ–æ”¹åº—å°åº—ï¼Œè«‹å…ˆè©¢å•ã€‚</li>
            <li>ç„¡é›»æ¢¯æ¬é‹éœ€åŠ åƒ¹æˆ–åªé€è‡³ä¸€æ¨“ï¼›è¶…æä»¶å¯èƒ½åªé€åˆ°é»ä¸æ¬é‹ã€‚</li>
            <li>åœ°å€è®Šæ›´ã€æ”¶ä»¶äººä¸åœ¨ã€äºŒæ¬¡é…é€ã€ä¿ç®¡é€¾æœŸç­‰ï¼Œç‰©æµæœƒåŠ æ”¶è²»ç”¨ã€‚</li>
            <li>å†·éˆè¦ç¯„ï¼šè‹¥å¤–ç®±åš´é‡è®Šå½¢æ»²æ¶²æˆ–å¤±æº«ï¼Œè«‹ã€Œæ‹’æ”¶ + ç«‹å³æ‹ç…§éŒ„å½±ã€ä¸¦è¯ç¹«æˆ‘å€‘ã€‚</li>
            <li>åˆ°è²¨é©—æ”¶ä»¥éŒ„å½±ç•«é¢ç‚ºæº–ï¼›è¶…é 24 å°æ™‚æˆ–ç„¡éŒ„å½±ï¼Œç‰©æµå¤šä»¥ã€Œéç‰©æµè²¬ã€è™•ç†ã€‚</li>
          </ul>
          <p>è«‹ç¢ºèªä¸Šè¿°å…§å®¹ï¼Œæ²åˆ°æœ€åº•å³å¯å•Ÿç”¨åŒæ„å‹¾é¸ã€‚</p>
          <div id="noticeBottom" style="height:1px"></div>
        </div>
        <label class="agree"><input id="agreeChk" type="checkbox" disabled> æˆ‘å·²é–±è®€ä¸¦åŒæ„ç‰©æµèˆ‡é€€è²¨èªªæ˜</label>
      </div>

      <div class="checkout">
        <button class="btn full" onclick="goCheckout()">å‰å¾€çµå¸³ï¼ˆå…ˆå¡«è³‡æ–™å¾ŒåŒ¯æ¬¾ï¼‰</button>
      </div>
    </div>
  </div>

  <!-- çµå¸³è³‡æ–™å½ˆçª— -->
  <div class="sheet" id="sheet">
    <div class="backdrop" onclick="closeSheet()"></div>
    <div class="card">
      <h3 style="margin:6px 0 10px">å¡«å¯«å‡ºè²¨è³‡æ–™</h3>
      <form id="orderForm" class="form" onsubmit="submitOrder(event)">
        <div class="two">
          <div><div class="label">å…¬å¸/åº—åï¼ˆæˆ–å§“åï¼‰</div><input class="input" name="buyer" placeholder="å•ƒé…¥å°ä¸­æ“šé» / ç‹å°æ˜" required></div>
          <div><div class="label">è¯çµ¡é›»è©±</div><input class="input" name="phone" placeholder="0912-345-678" required></div>
        </div>
        <div class="two">
          <div><div class="label">Emailï¼ˆæ”¶é€šçŸ¥ï¼‰</div><input class="input" name="email" type="email" placeholder="shop@example.com" required></div>
          <div><div class="label">LINE IDï¼ˆé¸å¡«ï¼‰</div><input class="input" name="line" placeholder="kensu_line"></div>
        </div>
        <div class="two">
          <div><div class="label">æ”¶ä»¶äºº</div><input class="input" name="recipient" placeholder="ç‹å°æ˜" required></div>
          <div><div class="label">å‡ºè²¨æ–¹å¼</div>
            <select name="ship_note" class="input" required>
              <option value="å®…é…">å®…é…</option>
              <option value="è¶…å•†å–è²¨">è¶…å•†å–è²¨</option>
            </select>
          </div>
        </div>
        <div><div class="label">æ”¶ä»¶åœ°å€ / è¶…å•†é–€å¸‚</div><input class="input" name="address" placeholder="ä¾‹ï¼šå°ä¸­å¸‚çŸ³å²¡å€çŸ³å²¡è¡—61è™Ÿ / 7-11 çŸ³å²¡é–€å¸‚" required></div>
        <div><div class="label">å‚™è¨»</div><textarea class="input" name="memo" rows="3" placeholder="ä¾‹ï¼šéœ€è¦çµ±ç·¨æŠ¬é ­ã€æŒ‡å®šåˆ°è²¨æ—¥ã€é–‹ç®±éŒ„å½±ç­‰"></textarea></div>

        <div class="bank">
          <strong>åŒ¯æ¬¾è³‡è¨Šï¼š</strong>
          <div class="fine"><b>æˆ¶åï¼š</b>é…¥å‘³é¦™ä¼æ¥­ç¤¾</div>
          <div class="fine"><b>éŠ€è¡Œ / å¸³è™Ÿï¼š</b>é€£ç·šéŠ€è¡Œï¼ˆä»£ç¢¼ 824ï¼‰ï½œ111013782313</div>
          <div class="fine"><b>åŒ¯æ¬¾é€šçŸ¥ï¼š</b>å®Œæˆé€å‡ºå¾Œè«‹åŒ¯æ¬¾ï¼Œä¸¦å‚³é€è‡³å®˜æ–¹ LINE å¸³è™Ÿ
            <a href="https://lin.ee/eE1XNc7" target="_blank" rel="noopener">https://lin.ee/eE1XNc7</a> æä¾›<b>åŒ¯æ¬¾å¾Œäº”ç¢¼</b>ã€‚</div>
          <div class="fine"><b>å‡ºè²¨æ™‚ç¨‹ï¼š</b>æˆ‘å€‘æ ¸å¸³å¾Œå‡ºè²¨ï¼ˆç´„ 1â€“3 å€‹å·¥ä½œå¤©ï¼‰ã€‚</div>
        </div>
        <div class="fine">é€å‡ºå¾Œç³»çµ±æœƒå°‡è¨‚å–®æ˜ç´°å¯„é€ç¢ºèªä¿¡è‡³æ‚¨çš„ä¿¡ç®±ã€åŒ¯æ¬¾å¾Œå‡ºè²¨ã€‘ã€‚</div>
        <div style="display:flex;justify-content:center;gap:8px;margin-top:8px">
          <button type="button" class="btn" onclick="closeSheet()">å–æ¶ˆ</button>
          <button type="submit" class="btn brand">é€å‡ºè¨‚å–®</button>
        </div>
      </form>
    </div>
  </div>

  <!-- âš™ï¸ ç®¡ç†é½’è¼ªï¼ˆåªåš RAW è½‰æ›ï¼‰ -->
  <button class="admin-gear" title="ç®¡ç†">
    <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M12 8a4 4 0 100 8 4 4 0 000-8zm9.4 4a7.4 7.4 0 01-.1 1l2 1.6-2 3.5-2.4-1a7.9 7.9 0 01-1.7 1l-.4 2.6H9.2l-.4-2.6a7.9 7.9 0 01-1.7-1l-2.4 1-2-3.5 2-1.6a7.4 7.4 0 010-2L.7 9.8l2-3.5 2.4 1c.5-.4 1.1-.7 1.7-1L7.2 3h5.6l.4 2.6c.6.3 1.2.6 1.7 1l2.4-1 2 3.5-2 1.2c.1.3.1.7.1 1z" fill="#111"/>
    </svg>
  </button>

  <div class="admin-pane" id="adminPane">
    <div class="admin-head">
      <h5>RAW è½‰æ›å·¥å…·</h5>
      <div style="display:flex;gap:8px">
        <button class="btn" onclick="logoutAdmin()">ç™»å‡º</button>
        <button class="btn" onclick="closeAdmin()">é—œé–‰ âœ•</button>
      </div>
    </div>

    <!-- æœªç™»å…¥ -->
    <div class="admin-login" id="adminLogin">
      <div class="label">è«‹å…ˆç™»å…¥ï¼ˆå¯†ç¢¼å›ºå®š 111111ï¼Œåƒ…å„²å­˜åœ¨æœ¬è£ç½®ï¼‰</div>
      <div class="admin-actions">
        <input class="input" id="adminPass" type="password" placeholder="è¼¸å…¥ç®¡ç†å¯†ç¢¼ 111111">
        <button class="btn brand" onclick="adminLogin()">ç™»å…¥</button>
      </div>
      <div class="fine">ç™»å…¥ç‹€æ…‹æœƒè¨˜éŒ„åœ¨æœ¬è£ç½®ï¼ˆlocalStorageï¼‰ï¼Œé‡æ–°æ•´ç†æˆ–é‡é–‹ä¹Ÿä»ç‚ºå·²ç™»å…¥ã€‚</div>
    </div>

    <!-- å·²ç™»å…¥çš„ RAW å·¥å…· -->
    <div class="admin-body" id="adminBody" style="display:none">
      <div class="label">GitHub é€£çµ âœ RAW è½‰æ›å™¨ï¼ˆå½±ç‰‡/åœ–ç‰‡ï¼‰</div>
      <input class="input" id="ghUrl" placeholder="è²¼ä¸Š https://github.com/.../blob/.../file.png">
      <div class="admin-actions">
        <button class="btn" onclick="convertGh()">è½‰æ› RAW</button>
        <button class="btn" onclick="copyRaw()">è¤‡è£½ RAW é€£çµ</button>
      </div>
      <input class="input" id="ghRawOut" placeholder="è½‰æ›çµæœæœƒé¡¯ç¤ºåœ¨é€™è£¡" readonly>
      <small class="fine">è¦å‰‡ï¼šæŠŠ <code>github.com/å¸³è™Ÿ/Repo/blob/åˆ†æ”¯/path/file</code> è®Šæˆ <code>raw.githubusercontent.com/å¸³è™Ÿ/Repo/åˆ†æ”¯/path/file</code>ï¼›æˆ–åŸç¶²å€å°¾åŠ  <code>?raw=1</code>ã€‚</small>
    </div>
  </div>

  <footer class="wrap">
    <div>é…¥å‘³é¦™ä¼æ¥­ç¤¾ï½œçµ±ç·¨ 93428964</div>
    <div>åœ°å€ï¼šå°ä¸­å¸‚çŸ³å²¡å€çŸ³å²¡è¡—61è™Ÿ</div>
    <div>é€£çµ¡é›»è©±ï¼š0933-721-978</div>
  </footer>

  <script>
    /* ===== ç”¢å“æ¬„ä½ä¸­æ–‡å‚™è¨» =====
    {
      id:'equip_fryer15',   // å”¯ä¸€IDï¼ˆè‹±æ•¸åº•ç·šï¼‰
      tag:'è¨­å‚™',           // ç¯©é¸æ¨™ç±¤ï¼š'è¨­å‚™' æˆ– ç•™ç©º
      name:'15å‹æ²¹ç‚¸é‹',    // å“å
      type:'å–®å°',          // é¡¯ç¤ºåœ¨å“åå¾Œï¼ˆä¾‹ï¼šå–®å°ã€å–®å“é …ã€æ•´ä»¶ï¼‰
      spec:'1å°',           // è¦æ ¼/å–®ä½
      price:9200,           // å”®åƒ¹ï¼ˆæ•¸å­—ï¼‰
      shipGroup:'å¸¸æº«',     // æº«å±¤ï¼š'å¸¸æº«' | 'å†·è—' | 'å†·å‡'
      shipFee:300,          // é‹è²»ï¼ˆåŒæº«å±¤å–æœ€å¤§å€¼è¨ˆä¸€æ¬¡ï¼›è¨­å‚™ä¸”=300ï¼Œé¡¯ç¤ºã€Œå¤§å‹è²¨ç‰©ã€ï¼‰
      freeQty:0,            // å–®å“å…é‹é–€æª»ï¼ˆæœ¬ç‰ˆå–æ¶ˆå…é‹ï¼Œè«‹ç¶­æŒ 0ï¼‰
      minOrder:1,           // ä¸€æ¬¡åŠ å…¥è³¼ç‰©è»Šçš„æ•¸é‡
      soldOut:false,        // æ˜¯å¦å”®å®Œ
      soldCount:0,          // å·²å”®å‡ºï¼ˆé¡¯ç¤ºç”¨ï¼‰
      shelfLife:'â€”',        // æ•ˆæœŸ
      storage:'â€”',          // ä¿å­˜æ–¹å¼
      img:'',               // åœ–ç‰‡URLï¼ˆå»ºè­° GitHub åŠ  ?raw=1ï¼‰
      note:''               // å‚™è¨»ï¼ˆå¯ç•™ç©ºï¼‰
    } */

    /* ===== é è¨­ç”¢å“ ===== */
    const DEFAULT_PRODUCTS = [
      /* å•ƒé…¥å°ˆç”¨ç²‰ */
      {id:'powder_case',  tag:'', name:'å•ƒé…¥å°ˆç”¨ç²‰', type:'æ•´ä»¶',  spec:'4.5å…¬æ–¤ / 5åŒ… / 1ä»¶', price:6000, shipGroup:'å¸¸æº«', shipFee:150, freeQty:0, minOrder:1, soldOut:false, soldCount:128, shelfLife:'12å€‹æœˆ', storage:'å¸¸æº«é™°æ¶¼ä¹¾ç‡¥', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E5%95%83%E9%85%A5%E5%B0%88%E7%94%A8%E7%B2%89.jpg?raw=1', note:''},
      {id:'powder_single',tag:'', name:'å•ƒé…¥å°ˆç”¨ç²‰', type:'å–®å“é …', spec:'4.5å…¬æ–¤ / 1åŒ…',        price:1250, shipGroup:'å¸¸æº«', shipFee:150, freeQty:0, minOrder:1, soldOut:false, soldCount:356, shelfLife:'12å€‹æœˆ', storage:'å¸¸æº«é™°æ¶¼ä¹¾ç‡¥', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E5%95%83%E9%85%A5%E5%B0%88%E7%94%A8%E7%B2%89.jpg?raw=1', note:''},

      /* è±è§’ä» */
      {id:'waterchest_case',  tag:'', name:'å•ƒé…¥è±è§’ä»', type:'æ•´ä»¶',  spec:'3å…¬æ–¤ / 4åŒ… / 1ä»¶', price:3500, shipGroup:'å†·å‡', shipFee:200, freeQty:0, minOrder:1, soldOut:false, soldCount:95, shelfLife:'å†·å‡12å€‹æœˆ', storage:'-18Â°C å†·å‡', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E8%8F%B1%E8%A7%92.jpg?raw=1', note:''},
      {id:'waterchest_single',tag:'', name:'å•ƒé…¥è±è§’ä»', type:'å–®å“é …', spec:'3å…¬æ–¤ / 1åŒ…',        price:990,  shipGroup:'å†·å‡', shipFee:200, freeQty:0, minOrder:1, soldOut:false, soldCount:210, shelfLife:'å†·å‡12å€‹æœˆ', storage:'-18Â°C å†·å‡', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E8%8F%B1%E8%A7%92.jpg?raw=1', note:''},

      /* ç‚¸é®®å¥¶ */
      {id:'milkfried_case',  tag:'', name:'å•ƒé…¥ç‚¸é®®å¥¶', type:'æ•´ä»¶',  spec:'6æ¢ / 16ç›’ / 1ä»¶', price:1900, shipGroup:'å†·å‡', shipFee:200, freeQty:0, minOrder:1, soldOut:false, soldCount:41, shelfLife:'å†·å‡6å€‹æœˆ', storage:'-18Â°C å†·å‡', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E7%82%B8%E9%AE%AE%E5%A5%B6.jpg?raw=1', note:''},
      {id:'milkfried_single',tag:'', name:'å•ƒé…¥ç‚¸é®®å¥¶', type:'å–®å“é …', spec:'6æ¢ / 1ç›’',        price:130,  shipGroup:'å†·å‡', shipFee:200, freeQty:0, minOrder:1, soldOut:false, soldCount:280, shelfLife:'å†·å‡6å€‹æœˆ', storage:'-18Â°C å†·å‡', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E7%82%B8%E9%AE%AE%E5%A5%B6.jpg?raw=1', note:''},

      /* å•ƒé…¥å°ˆç”¨è„‚ï¼ˆåŸå°ˆç”¨ç‰›å¥¶ï¼‰ */
      {id:'fat_case',  tag:'', name:'å•ƒé…¥å°ˆç”¨è„‚', type:'æ•´ä»¶',  spec:'330æ¯«å‡ / 10ç“¶ / 1ä»¶', price:880, shipGroup:'å†·å‡', shipFee:200, freeQty:0, minOrder:1, soldOut:false, soldCount:33, shelfLife:'å†·å‡6å€‹æœˆ', storage:'-18Â°C å†·å‡', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E5%B0%88%E7%94%A8%E8%84%82.jpg?raw=1', note:''},
      {id:'fat_single',tag:'', name:'å•ƒé…¥å°ˆç”¨è„‚', type:'å–®å“é …', spec:'330æ¯«å‡ / 1ç“¶',        price:95,  shipGroup:'å†·å‡', shipFee:200, freeQty:0, minOrder:1, soldOut:false, soldCount:402, shelfLife:'å†·å‡6å€‹æœˆ', storage:'-18Â°C å†·å‡', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E5%B0%88%E7%94%A8%E8%84%82.jpg?raw=1', note:''},

      /* ä¹³é…ªä¸ï¼ˆå†·å‡ä¿å­˜ï¼Œä½¿ç”¨å‰ä¸€å¤©éœ€å†·è—é€€å†°ï¼›æ•ˆæœŸ30å¤©ä¾åŒ…è£ï¼‰ */
      {id:'cheese_case',  tag:'', name:'å•ƒé…¥ä¹³é…ªä¸', type:'æ•´ä»¶',  spec:'1å…¬æ–¤ / 10åŒ… / 1ä»¶', price:4200, shipGroup:'å†·å‡', shipFee:180, freeQty:0, minOrder:1, soldOut:false, soldCount:0, shelfLife:'30å¤©ï¼ˆä¾åŒ…è£ï¼‰', storage:'å†·å‡ä¿å­˜ï¼›ä½¿ç”¨å‰ä¸€å¤©å†·è—é€€å†°', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E8%B5%B7%E5%8F%B8.jpg?raw=1', note:''},
      {id:'cheese_single',tag:'', name:'å•ƒé…¥ä¹³é…ªä¸', type:'å–®å“é …', spec:'1å…¬æ–¤ / 1åŒ…',        price:450,  shipGroup:'å†·å‡', shipFee:180, freeQty:0, minOrder:1, soldOut:false, soldCount:0, shelfLife:'30å¤©ï¼ˆä¾åŒ…è£ï¼‰', storage:'å†·å‡ä¿å­˜ï¼›ä½¿ç”¨å‰ä¸€å¤©å†·è—é€€å†°', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E8%B5%B7%E5%8F%B8.jpg?raw=1', note:''},

      /* èŠ‹æ³¥ä¸ï¼ˆå†·è—ï¼›æ•ˆæœŸ30å¤©ä¾åŒ…è£ï¼‰ */
      {id:'taro_case',   tag:'', name:'å•ƒé…¥èŠ‹æ³¥ä¸', type:'æ•´ä»¶',  spec:'750å…¬å…‹ / 10ç›’ / 1ä»¶', price:3550, shipGroup:'å†·è—', shipFee:180, freeQty:0, minOrder:1, soldOut:false, soldCount:0, shelfLife:'30å¤©ï¼ˆä¾åŒ…è£ï¼‰', storage:'0â€“7Â°C å†·è—', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E7%82%B8%E9%AE%AE%E5%A5%B6.jpg?raw=1', note:'ç¤ºæ„åœ–'},
      {id:'taro_single', tag:'', name:'å•ƒé…¥èŠ‹æ³¥ä¸', type:'å–®å“é …', spec:'750å…¬å…‹ / 1ç›’',        price:380,  shipGroup:'å†·è—', shipFee:180, freeQty:0, minOrder:1, soldOut:false, soldCount:0, shelfLife:'30å¤©ï¼ˆä¾åŒ…è£ï¼‰', storage:'0â€“7Â°C å†·è—', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E7%82%B8%E9%AE%AE%E5%A5%B6.jpg?raw=1', note:'ç¤ºæ„åœ–'},

      /* è¨­å‚™ï¼ˆå«æ–°åœ–ç‰‡èˆ‡åƒ¹æ ¼/å“åæ›´æ–°ï¼‰ */
      {id:'equip_fryer15',   tag:'è¨­å‚™', name:'15å‹æ²¹ç‚¸é‹',            type:'å–®å°', spec:'1å°', price:9200,  shipGroup:'å¸¸æº«', shipFee:300, freeQty:0, minOrder:1, soldOut:false, soldCount:0, shelfLife:'â€”', storage:'å¸¸æº«', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/15%E5%9E%8B%E6%B2%B9%E9%8D%8B.jpg?raw=1', note:''},
      {id:'equip_fryer25',   tag:'è¨­å‚™', name:'25å‹æ²¹ç‚¸é‹',            type:'å–®å°', spec:'1å°', price:11200, shipGroup:'å¸¸æº«', shipFee:300, freeQty:0, minOrder:1, soldOut:false, soldCount:0, shelfLife:'â€”', storage:'å¸¸æº«', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/25%E5%9E%8B%E6%B2%B9%E9%8D%8B.jpg?raw=1', note:''},
      {id:'equip_mixer220',  tag:'è¨­å‚™', name:'220Væ”ªæ‹Œæ©Ÿï¼ˆ12å…¬å‡ï¼‰', type:'å–®å°', spec:'1å°', price:13000, shipGroup:'å¸¸æº«', shipFee:150, freeQty:0, minOrder:1, soldOut:false, soldCount:0, shelfLife:'â€”', storage:'å¸¸æº«', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/220V%E6%94%AA%E6%8B%8C%E5%99%A8.jpg?raw=1', note:''},
      {id:'equip_mixer110',  tag:'è¨­å‚™', name:'110Væ”ªæ‹Œé‹ï¼ˆ10å…¬å‡ï¼‰', type:'å–®å°', spec:'1å°', price:11500, shipGroup:'å¸¸æº«', shipFee:150, freeQty:0, minOrder:1, soldOut:false, soldCount:0, shelfLife:'â€”', storage:'å¸¸æº«', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/110V%E6%94%AA%E6%8B%8C%E9%8D%8B.jpg?raw=1', note:''},
      {id:'equip_steamer110',tag:'è¨­å‚™', name:'110Vé›»è’¸é‹',            type:'å–®å°', spec:'1å°', price:2480,  shipGroup:'å¸¸æº«', shipFee:150, freeQty:0, minOrder:1, soldOut:false, soldCount:0, shelfLife:'â€”', storage:'å¸¸æº«', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/110V%E8%92%B8%E9%8D%8B.jpg?raw=1', note:''},
      {id:'equip_timer3',    tag:'è¨­å‚™', name:'ä¸‰åˆä¸€è¨ˆæ™‚å™¨',          type:'å–®å“é …', spec:'1å°', price:550,   shipGroup:'å¸¸æº«', shipFee:60,  freeQty:0, minOrder:1, soldOut:false, soldCount:0, shelfLife:'â€”', storage:'å¸¸æº«', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E8%A8%88%E6%99%82%E5%99%A8.jpg?raw=1', note:''},
      {id:'equip_divider',   tag:'è¨­å‚™', name:'ç‚¸é‹åˆ†éš”æ¿',            type:'å–®å“é …', spec:'1å€‹', price:1480,  shipGroup:'å¸¸æº«', shipFee:60,  freeQty:0, minOrder:1, soldOut:false, soldCount:0, shelfLife:'â€”', storage:'å¸¸æº«', img:'https://github.com/kensuwaterchestnut/kenwholesale/blob/main/%E5%85%A7%E6%AA%94%E6%9D%BF.jpg?raw=1', note:''}
    ];

    /* ç¯©é¸æ¨™ç±¤ */
    const TAGS = ['è¨­å‚™','å¸¸æº«','å†·è—','å†·å‡'];
    const GROUP_LABELS = { 'å¸¸æº«':'å¸¸æº«', 'å†·è—':'å†·è—', 'å†·å‡':'å†·å‡' };

    /* å…¨é¤¨å…é‹é–€æª» */
    const FREE_SHIP_ALL = 5000;

    /* ç‹€æ…‹ï¼ˆæœ¬æ©Ÿï¼‰ */
    const LS_KEY_PRODUCTS='kensu_wholesale_products_v9';
    const LS_KEY_BRAND='kensu_wholesale_brand_v9';
    const LS_KEY_ADMIN='kensu_admin_ok_v3';

    const brand = loadBrand();
    const products = loadProducts();
    let filterOn='å…¨éƒ¨';
    const cart=new Map(); // id -> { product, qty }

    function loadProducts(){
      try{
        const saved = JSON.parse(localStorage.getItem(LS_KEY_PRODUCTS));
        if(Array.isArray(saved) && saved.length>0) return saved;
        return DEFAULT_PRODUCTS;
      }catch{ return DEFAULT_PRODUCTS }
    }
    function loadBrand(){
      try{ return JSON.parse(localStorage.getItem(LS_KEY_BRAND)) || {logo:'',title:'å•ƒé…¥è±è§’é…¥æ‰¹ç™¼å®˜ç¶²',heroTitle:'å¤œå¸‚èµ·å®¶ï¼Œèµ°é€²å…¨å°çš„é»ƒé‡‘é…¥è„†',heroSub:'æ•´ä»¶èˆ‡å–®å“é …ï½œå…ˆåŒ¯æ¬¾ï¼Œæ ¸å¸³å¾Œå‡ºè²¨'} }
      catch{ return {logo:'',title:'å•ƒé…¥è±è§’é…¥æ‰¹ç™¼å®˜ç¶²',heroTitle:'å¤œå¸‚èµ·å®¶ï¼Œèµ°é€²å…¨å°çš„é»ƒé‡‘é…¥è„†',heroSub:'æ•´ä»¶èˆ‡å–®å“é …ï½œå…ˆåŒ¯æ¬¾ï¼Œæ ¸å¸³å¾Œå‡ºè²¨'} }
    }

    function applyBrand(){
      if(brand.logo) document.getElementById('logoImg').src=brand.logo;
      document.getElementById('siteTitle').textContent=brand.title||'å•ƒé…¥è±è§’é…¥æ‰¹ç™¼å®˜ç¶²';
      document.getElementById('heroTitle').textContent=brand.heroTitle||'';
      document.getElementById('heroSub').textContent=brand.heroSub||'';
    }
    function uniqueTags(){ return ['å…¨éƒ¨',...TAGS] }
    function renderChips(){
      const chips=document.getElementById('chips'); chips.innerHTML='';
      uniqueTags().forEach(t=>{
        const btn=document.createElement('button');
        btn.className='chip'+(t===filterOn?' is-on':''); btn.textContent=t;
        btn.onclick=()=>{filterOn=t; renderGrid()};
        chips.appendChild(btn);
      })
    }
    function matchFilter(p){
      if(filterOn==='å…¨éƒ¨') return true;
      if(filterOn==='è¨­å‚™') return p.tag==='è¨­å‚™';
      if(['å¸¸æº«','å†·è—','å†·å‡'].includes(filterOn)) return (GROUP_LABELS[p.shipGroup]===filterOn);
      return true;
    }

    function renderGrid(){
      const grid=document.getElementById('grid'); grid.innerHTML='';
      products.filter(matchFilter).forEach(p=>{
        const title=`${p.name}ï¼ˆ${p.type}ï¼‰`;
        const card=document.createElement('article'); card.className='card';
        const qtyId = `qty_${p.id}`;
        const isHeavyEquip = (p.tag==='è¨­å‚™' && Number(p.shipFee)===300);
        const shipNote = isHeavyEquip ? 'å¤§å‹è²¨ç‰©' : `é‹è²» $${fmt(p.shipFee)}`;
        card.innerHTML=`
          <div class="media">
            ${p.img?`<img src="${p.img}" alt="${title}" loading="lazy" decoding="async">`:`<span style='color:#9ca3af'>(å°šæœªä¸Šå‚³åœ–ç‰‡)</span>`}
            <span class='badge'>${GROUP_LABELS[p.shipGroup]||p.shipGroup}</span>
            ${p.tag==='è¨­å‚™'?`<span class='badge right'>è¨­å‚™</span>`:''}
            ${p.soldOut?`<span class='soldout'>å·²å”®å®Œ</span>`:''}
          </div>
          <div class='body'>
            <div class='meta shipline'>${shipNote}</div>
            <h3>${title}</h3>
            <div class='meta'>${p.spec}</div>
            <div class='meta'>å·²å”®å‡ºï¼š${fmt(p.soldCount||0)}</div>
            <div class='meta'>æ•ˆæœŸï¼š${p.shelfLife||'â€”'}ï½œä¿å­˜ï¼š${p.storage||'â€”'}</div>
            <div class='price'>$${fmt(p.price)}</div>

            <div class="qtyline">
              <button class="qtybtn" onclick="cardDec('${qtyId}')">âˆ’</button>
              <input id="${qtyId}" class="qtyinput" type="number" min="1" value="${p.minOrder||1}" oninput="cardNormalize('${qtyId}')">
              <button class="qtybtn" onclick="cardInc('${qtyId}')">ï¼‹</button>
            </div>

            <button class='btn add' ${p.soldOut||p.minOrder===0?'disabled':''} onclick="addToCartFromCard('${p.id}','${qtyId}')">åŠ å…¥è³¼ç‰©è»Š</button>
            <div class='note'>${p.note?`${p.note}`:''}</div>
          </div>`;
        grid.appendChild(card);
      })
    }

    /* æ•¸é‡æ§åˆ¶ï¼ˆå•†å“å¡ï¼‰ */
    function cardNormalize(qid){
      const inp=document.getElementById(qid);
      let v=parseInt(inp.value||'1',10);
      if(isNaN(v)||v<1) v=1;
      inp.value=v;
    }
    function cardInc(qid){const inp=document.getElementById(qid);cardNormalize(qid);inp.value=parseInt(inp.value,10)+1;}
    function cardDec(qid){const inp=document.getElementById(qid);cardNormalize(qid);inp.value=Math.max(1,parseInt(inp.value,10)-1);}
    function addToCartFromCard(pid,qid){
      const inp=document.getElementById(qid); cardNormalize(qid);
      addToCart(pid, parseInt(inp.value,10));
    }

    function fmt(n){ return Number(n).toLocaleString('zh-TW') }
    function scrollToStore(){ document.getElementById('store').scrollIntoView({behavior:'smooth'}) }

    /* è³¼ç‰©è»Š */
    function toast(msg){
      const t=document.createElement('div'); t.textContent=msg;
      t.style.cssText='position:fixed;left:50%;bottom:90px;transform:translateX(-50%);background:#111;color:#fff;padding:8px 12px;border-radius:10px;font-size:13px;opacity:.96;z-index:120';
      document.body.appendChild(t); setTimeout(()=>t.remove(),1200);
    }
    function addToCart(pid,qty=1){
      const p=products.find(x=>x.id===pid); if(!p) return;
      const row=cart.get(pid)||{product:p,qty:0}; row.qty+=qty; cart.set(pid,row);
      updateCartCount(); renderCart(); toast('å·²åŠ å…¥è³¼ç‰©è»Š');
    }
    function updateCartCount(){ let totalQty=0; cart.forEach(v=>totalQty+=v.qty); document.getElementById('cartCount').textContent=totalQty }
    function openCart(){ document.getElementById('drawer').classList.add('on'); renderCart() }
    function closeCart(){ document.getElementById('drawer').classList.remove('on') }
    function clearCart(){ if(confirm('ç¢ºå®šè¦æ¸…ç©ºè³¼ç‰©è»Šå—ï¼Ÿ')){ cart.clear(); updateCartCount(); renderCart(); } }
    function removeItem(pid){ if(cart.has(pid)){ cart.delete(pid); updateCartCount(); renderCart(); } }

    function renderCart(){
      const list=document.getElementById('cartList'); list.innerHTML='';
      let sub=0; let groups={};
      cart.forEach(({product,qty})=>{
        sub += product.price*qty;
        const g=product.shipGroup;
        groups[g] ||= {qty:0,feeMax:0,name:GROUP_LABELS[g]||g};
        groups[g].qty += qty;
        groups[g].feeMax=Math.max(groups[g].feeMax,Number(product.shipFee)||0);

        const subLine=product.price*qty;
        const item=document.createElement('div'); item.className='item';
        const inputId = `cart_qty_${product.id}`;
        const isHeavyEquip = (product.tag==='è¨­å‚™' && Number(product.shipFee)===300);
        item.innerHTML=`
          <div style='width:56px;height:56px;border:1px solid var(--border);border-radius:10px;overflow:hidden;background:#f3f4f6;display:grid;place-items:center'>
            ${product.img?`<img src='${product.img}' style='width:100%;height:100%;object-fit:cover'>`:'â€”'}
          </div>
          <div>
            <div style='font-weight:700;display:flex;align-items:center;gap:6px'>
              <span>${product.name}ï¼ˆ${product.type}ï¼‰</span>
              <button title="åˆªé™¤" onclick="removeItem('${product.id}')" style="border:1px solid var(--border);background:#fff;border-radius:8px;padding:2px 8px;cursor:pointer">åˆªé™¤</button>
            </div>
            <div class='item-sub'>${product.spec}ï½œå–®åƒ¹ $${fmt(product.price)}ï½œå°è¨ˆ $${fmt(subLine)}ï½œ${GROUP_LABELS[product.shipGroup]||product.shipGroup}${isHeavyEquip?'ï½œå¤§å‹è²¨ç‰©':''}</div>
            <div class='item-sub'>å·²å”®å‡ºï¼š${fmt(product.soldCount||0)}ï½œæ•ˆæœŸï¼š${product.shelfLife||'â€”'}ï½œä¿å­˜ï¼š${product.storage||'â€”'}</div>
          </div>
          <div class='qty'>
            <button onclick="decQty('${product.id}')">âˆ’</button>
            <input id="${inputId}" class="qtyinput" type="number" min="1" value="${qty}" oninput="setQty('${product.id}', this.value)">
            <button onclick="incQty('${product.id}')">ï¼‹</button>
          </div>`;
        list.appendChild(item);
      });

      const sum=document.getElementById('cartSummary'); let ship=0; let shipRows='';
      const reachAllFree = sub >= FREE_SHIP_ALL;

      if(reachAllFree){
        ship = 0;
        shipRows += `<div class='row'><div>å…¨é¤¨å…é‹</div><div class="ok">å·²é” $${fmt(FREE_SHIP_ALL)}</div></div>`;
      }else{
        const needAll = Math.max(0, FREE_SHIP_ALL - sub);
        shipRows += `<div class='row'><div>å…¨é¤¨å…é‹</div><div class="warn">å°šå·® $${fmt(needAll)}</div></div>`;
        Object.entries(groups).forEach(([key,g])=>{
          const fee=g.feeMax; ship+=fee;
          shipRows += `<div class='row'><div>${g.name} é‹è²»</div><div>$${fmt(fee)}</div></div>`;
        });
      }

      const total=sub+ship; let totalQty=0; cart.forEach(v=>totalQty+=v.qty);
      let groupDetail=Object.entries(groups).map(([k,g])=>`${g.name}:${g.qty}ä»¶`).join('ã€');

      sum.innerHTML=`
        <div class='row'><div>å•†å“å°è¨ˆ</div><div>$${fmt(sub)}</div></div>
        <div class='row'><div>ä»¶æ•¸æ˜ç´°</div><div>${totalQty} ä»¶ï¼ˆ${groupDetail||'â€”'}ï¼‰</div></div>
        ${shipRows||"<div class='row'><div>é‹è²»</div><div>$0</div></div>"}
        <div class='row' style='border-top:1px solid var(--border);padding-top:8px;font-weight:900'><div>æ‡‰ä»˜ç¸½é¡</div><div>$${fmt(total)}</div></div>
        <div class='fine'>ï¼Šå…¨é¤¨æ»¿ $${fmt(FREE_SHIP_ALL)} å…é‹ï¼›æœªé”æ™‚ï¼Œä¸åŒæº«å±¤åˆ†é–‹è¨ˆç®—é‹è²»ã€‚</div>`;
    }
    function incQty(pid){ const row=cart.get(pid); if(!row) return; row.qty++; cart.set(pid,row); updateCartCount(); renderCart(); }
    function decQty(pid){ const row=cart.get(pid); if(!row) return; row.qty--; if(row.qty<=0) cart.delete(pid); else cart.set(pid,row); updateCartCount(); renderCart(); }
    function setQty(pid,val){
      let v = parseInt(val||'1',10); if(isNaN(v)||v<1) v=1;
      const row=cart.get(pid); if(!row) return;
      row.qty=v; cart.set(pid,row); updateCartCount(); renderCart();
    }

    /* é ˆçŸ¥å±•é–‹/æ»¾å‹•è§£é– */
    function toggleNotice(){
      const box=document.getElementById('noticeBox');
      box.style.display = (box.style.display==='none')?'block':'none';
    }
    function noticeScrolled(){
      const box=document.getElementById('noticeBox');
      const chk=document.getElementById('agreeChk');
      if(box.scrollTop + box.clientHeight >= box.scrollHeight - 2){ chk.disabled=false; }
    }

    /* çµå¸³ï¼ˆå¯ä¸²æ¥ Apps Scriptï¼‰ */
    const GAS_ENDPOINT=''; // â† è²¼ Apps Script Web App URLï¼ˆç•™ç©ºå‰‡åªæ¨¡æ“¬ï¼‰
    function goCheckout(){
      const agree=document.getElementById('agreeChk');
      if(!agree.checked){ alert('è«‹å…ˆå±•é–‹ä¸¦é–±è®€ã€Œç‰©æµèˆ‡é€€è²¨èªªæ˜ã€ï¼Œæ²åˆ°åº•å¾Œå‹¾é¸åŒæ„ï¼Œæ‰èƒ½çµå¸³ã€‚'); return; }
      if(cart.size===0){ alert('è«‹å…ˆåŠ å…¥å•†å“'); return }
      document.getElementById('sheet').classList.add('on')
    }
    function closeSheet(){ document.getElementById('sheet').classList.remove('on') }
    async function submitOrder(e){
      e.preventDefault(); const fd=new FormData(e.target);
      let items=[]; let sub=0; let ship=0; let groups={};
      cart.forEach(({product,qty})=>{
        items.push({id:product.id,name:product.name,type:product.type,spec:product.spec,price:product.price,qty,shipGroup:product.shipGroup});
        sub+=product.price*qty;
        const g=product.shipGroup; groups[g] ||= {qty:0,fee:0};
        groups[g].qty += qty; groups[g].fee = Math.max(groups[g].fee, product.shipFee||0);
      });
      if(sub < FREE_SHIP_ALL){ Object.values(groups).forEach(g=> ship += g.fee ); }
      const total=sub+ship;
      const payload={
        type:'ORDER',
        buyer:fd.get('buyer'), phone:fd.get('phone'), email:fd.get('email'), line:fd.get('line'),
        recipient:fd.get('recipient'), address:fd.get('address'), ship_note:fd.get('ship_note'), memo:fd.get('memo'),
        items, sub, ship, total, ts:new Date().toISOString()
      };
      if(!GAS_ENDPOINT){
        console.log('DEV payload â†’', payload);
        alert('å·²æ¨¡æ“¬é€å‡ºè¨‚å–®ã€‚ç¸½é¡ï¼š$'+fmt(total)+'ï¼ˆå®ŒæˆåŒ¯æ¬¾è«‹è‡³ LINE å‚³å¾Œäº”ç¢¼ï¼‰');
        closeSheet(); closeCart(); return;
      }
      try{
        await fetch(GAS_ENDPOINT,{method:'POST',mode:'no-cors',body:JSON.stringify(payload)});
        alert('è¨‚å–®å·²é€å‡ºï¼è«‹ä¾åŒ¯æ¬¾è³‡è¨ŠåŒ¯æ¬¾ï¼Œæˆ‘å€‘æ ¸å¸³å¾Œå‡ºè²¨ã€‚');
        cart.clear(); updateCartCount(); closeSheet(); closeCart();
      }catch(err){ console.error(err); alert('é€å‡ºå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦æˆ–è¯ç¹«å®¢æœã€‚') }
    }

    /* ç®¡ç†å“¡ï¼ˆé½’è¼ª â†’ ç™»å…¥ â†’ RAW å·¥å…·ï¼›å¯†ç¢¼ 111111ï¼Œåƒ…æœ¬æ©Ÿï¼‰ */
    const gearBtn = document.querySelector('.admin-gear');
    gearBtn.addEventListener('click', openAdmin);
    function openAdmin(){
      document.getElementById('adminPane').classList.add('on');
      const authed = localStorage.getItem(LS_KEY_ADMIN)==='YES';
      document.getElementById('adminLogin').style.display = authed ? 'none' : 'block';
      document.getElementById('adminBody').style.display  = authed ? 'block' : 'none';
    }
    function closeAdmin(){ document.getElementById('adminPane').classList.remove('on') }
    function adminLogin(){
      const pass=document.getElementById('adminPass').value;
      if(pass==='111111'){ localStorage.setItem(LS_KEY_ADMIN,'YES'); openAdmin(); }
      else{ alert('å¯†ç¢¼éŒ¯èª¤'); }
    }
    function logoutAdmin(){ localStorage.removeItem(LS_KEY_ADMIN); openAdmin(); }

    /* GitHub âœ RAW è½‰æ›å™¨ */
    function githubToRaw(url){
      try{
        const u=new URL(url);
        if(u.hostname==='github.com'){
          const parts=u.pathname.split('/').filter(Boolean);
          const idx=parts.indexOf('blob');
          if(idx>0){
            const user=parts[0], repo=parts[1];
            const branch=parts[3];
            const rest=parts.slice(4).join('/');
            return `https://raw.githubusercontent.com/${user}/${repo}/${branch}/${rest}`;
          }
        }
        if(!url.includes('?')) return url+'?raw=1';
        return url+'&raw=1';
      }catch{ return url }
    }
    function convertGh(){ const url=document.getElementById('ghUrl').value.trim(); document.getElementById('ghRawOut').value=githubToRaw(url) }
    function copyRaw(){ const o=document.getElementById('ghRawOut'); o.select(); document.execCommand('copy'); alert('å·²è¤‡è£½ RAW é€£çµ') }

    /* å•Ÿå‹• */
    applyBrand();
    renderChips();
    renderGrid();
  </script>
</body>
</html>
